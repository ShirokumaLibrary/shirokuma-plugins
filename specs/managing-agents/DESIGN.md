# managing-agents 設計メモ

スキル管理用メタデータ。実行時には読み込まれない。

## 移行: エージェント → `context: fork` 付きスキル

スキルが `context: fork` をサポートしたことで、独立サブエージェントとして実行可能に。ほとんどのユースケースでスキルを推奨:
- リサーチタスク（`researching-best-practices` スキル参照）
- レビュータスク（`reviewing-on-issue` スキル参照）
- 設定検証（`reviewing-claude-config` スキル参照）

**エージェントが適切な場合:**
- 真にオープンエンドなマルチステップタスクで完全な自律性が必要
- Task ツールでさらにサブエージェントを生成する必要がある

## エージェントシステム: ワークフロー vs エージェント

この区別の理解は効果的なシステム設計に**不可欠**。

| タイプ | 制御 | 使用タイミング |
|--------|------|--------------|
| **ワークフロー** | 事前定義コードパスが LLM 呼び出しを統制 | サブタスクが予測可能、一貫性が必要 |
| **エージェント** | LLM が動的にプロセスとツール使用を決定 | オープンエンドな問題、予測不可能なステップ |

### 判断ガイド

**全ステップを予測できるか?**

| 回答 | 使用 | 特徴 |
|------|------|------|
| YES | ワークフロー | 決定論的、信頼性高い（プロンプトチェーン、ルーティング、並列化） |
| NO | エージェント | 柔軟、自律的（高レイテンシ/コスト、未知を処理） |

**まずワークフローから始める** — 結果が正当化する場合にのみエージェントの自律性を追加。

## トリガーキーワード

SKILL.md の frontmatter `description` フィールドに定義。スキル選択はこのフィールドでマッチングされる。

- "エージェント作成", "create agent", "make a new agent"
- "エージェント更新", "update agent", "improve agent"
- "agent template", "AGENT.md"

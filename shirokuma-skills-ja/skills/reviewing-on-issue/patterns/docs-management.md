# ドキュメント管理パターン

## プロジェクトドキュメント構造

| パス | 用途 |
|------|------|
| `docs/portal/index.html` | メインポータルページ |
| `docs/portal/viewer.html` | Markdown ビューア |
| `docs/portal/*.html` | ガイドページ |
| `docs/generated/api-html/` | TypeDoc API ドキュメント |
| `docs/generated/test-cases.md` | テストケース Markdown |
| `docs/generated/deps/` | 依存関係グラフ |
| `docs/*.md` | 手書きナレッジドキュメント |
| `docs/phase*/` | フェーズ実装ドキュメント |

## ドキュメント種別

### 手書きナレッジドキュメント

配置: `docs/*.md`（ルートレベル）

| ドキュメント種別 | 用途 | 更新頻度 |
|-----------------|------|---------|
| パターンドキュメント | 開発パターン、ベストプラクティス | パターン変更時 |
| 実装記録 | 機能実装履歴 | 1回限り |
| ガイドドキュメント | ハウツーガイド | 必要に応じて |
| トラブルシューティング | 既知の問題と修正 | 問題発見時 |

### 自動生成ドキュメント

配置: `docs/generated/`

| ドキュメント種別 | 生成コマンド | 更新トリガー |
|-----------------|------------|-------------|
| API ドキュメント | `pnpm docs:api` | Server Action 変更後 |
| テストケース | `pnpm docs:tests` | テスト変更後 |
| 依存関係グラフ | `pnpm docs:deps` | 依存関係変更後 |
| DB スキーマ | `pnpm docs:dbml` | スキーマ変更後 |

## ドキュメントレビューチェックリスト

### 内容の正確性

- [ ] 技術情報が現在のコードベースと一致
- [ ] コード例が実行可能で正しい
- [ ] バージョン番号が最新
- [ ] コマンド例が現在のセットアップで動作

### ステータス追跡

- [ ] 実装状況が実態を反映
- [ ] 「最終更新日」が最新
- [ ] 「次のステップ」がまだ有効
- [ ] 完了項目にマークあり

### 構造の品質

- [ ] 明確なタイトルと要約あり
- [ ] 適切なセクションで整理
- [ ] コード例にシンタックスハイライトあり
- [ ] テーブルが適切にフォーマット済み

## よくあるドキュメントの問題

### 古いステータス

```markdown
## Implementation Status

- 完了: ユーティリティ作成
- 完了: テスト追加
- 進行中: Server Actions のリファクタ  ← 完了しているか確認
```

**修正**: 実装完了時にステータスを更新。

### バージョン不一致

```markdown
**Next.js Version**: 16.0.4  ← package.json と確認
```

**修正**: `package.json` とバージョン番号を同期。

### デッドリンク

**修正**: すべての内部リンクが既存ファイルを指しているか検証。

## ベストプラクティス

1. **即座に更新**: 実装変更後すぐにドキュメント更新
2. **唯一の真実の源**: 正式バージョンは CLAUDE.md を参照
3. **ステータス追跡**: 一貫したステータスマーカーを使用
4. **日付スタンプ**: 実装ドキュメントに「最終更新日」を含む
5. **ナレッジへのリンク**: 複雑なパターンはナレッジファイルに記載
